define(["require","exports","old/CPU"],function(n,t,i){function o(){for(var n=0;n<4096;n++)r.memory[n]=e[n];r.debug_next(u.displayByte(r.memory[r.PC])+u.displayByte(r.memory[r.PC+1]))}var u=i,r=new u.Cpu,e,f;$(document).ready(function(){var n={registers:r.debug_registers,I:r.debug_i,PC:r.debug_pc,SP:r.debug_sp,next:r.debug_next};r.memory[512]=96,r.memory[513]=18,r.memory[514]=96,r.memory[515]=66,r.memory[516]=36,r.memory[517]=4,r.memory[1028]=166,r.memory[1029]=0,r.memory[1030]=0,r.memory[1031]=238,r.memory[518]=245,r.memory[519]=101,r.memory[520]=133,r.memory[521]=48,r.memory[522]=133,r.memory[523]=68,r.memory[1536]=1,r.memory[1537]=2,r.memory[1538]=3,r.memory[1539]=4,r.memory[1540]=5,r.memory[524]=23,r.memory[1792]=104,r.memory[1793]=32,r.memory[1794]=105,r.memory[1795]=16,r.memory[1796]=248,r.memory[1797]=21,r.memory[1798]=249,r.memory[1799]=24,r.memory[1800]=250,r.memory[1801]=7,r.memory[1802]=58,r.memory[1803]=0,r.memory[1804]=23,r.memory[1805]=8,r.memory[1806]=23,r.memory[1807]=4,r.debug_next(u.displayByte(r.memory[r.PC])+u.displayByte(r.memory[r.PC+1])),e=r.memory.slice(0),r.onHalt.subscribe(function(){r.reset(),o()}),r.startSound.subscribe(function(){$("#sound").css("color","green")}),r.stopSound.subscribe(function(){$("#sound").css("color","red")}),setInterval(function(){r.tick()},16),ko.applyBindings(n)}),f=null,$("#startstop").click(function(){f?(clearInterval(f),f=null):f=setInterval(function(){r.cycle()},8)}),$("#cycle").click(function(){r.cycle()}),$("#reset").click(function(){r.reset(),o()})})