define(["require","exports"],function(n,t){(function(n){var t=function(){function n(n,t){this.registers=n,this.stack=t,this.instructions=[],this.instructions8=[],this.mapInstructions()}return n.prototype.execute=function(n){this.instructions[n.nibbles[0]].call(this,n)},n.prototype.iRet=function(){this.registers.PC=this.stack.pop()},n.prototype.iJmp=function(n){this.registers.PC=n.NNN},n.prototype.iCall=function(n){this.stack.push(this.registers.PC),this.registers.PC=n.NNN},n.prototype.iSkipEqual=function(n){this.registers.read(n.nibbles[1])===n.NN&&(this.registers.PC+=2)},n.prototype.iSkipNotEqual=function(n){this.registers.read(n.nibbles[1])!==n.NN&&(this.registers.PC+=2)},n.prototype.iSkipXequalY=function(n){this.registers.read(n.nibbles[1])===this.registers.read(n.nibbles[2])&&(this.registers.PC+=2)},n.prototype.iSetX=function(n){this.registers.write(n.nibbles[1],n.NN)},n.prototype.iAddNtoX=function(n){var t=this.registers.read(n.nibbles[1]);this.registers.write(n.nibbles[1],t+n.NN&255)},n.prototype.branch8=function(n){this.instructions8[n.nibbles[3]].call(this,n)},n.prototype.iSetXtoY=function(n){this.registers.write(n.nibbles[1],this.registers.read(n.nibbles[2]))},n.prototype.iOrXwithY=function(n){var t=this.registers.read(n.nibbles[1])|this.registers.read(n.nibbles[2]);this.registers.write(n.nibbles[1],t)},n.prototype.iAndXwithY=function(n){var t=this.registers.read(n.nibbles[1])&this.registers.read(n.nibbles[2]);this.registers.write(n.nibbles[1],t)},n.prototype.iXorXwithY=function(n){var t=this.registers.read(n.nibbles[1])^this.registers.read(n.nibbles[2]);this.registers.write(n.nibbles[1],t)},n.prototype.iAddYtoXWithCarry=function(n){var t=this.registers.read(n.nibbles[1])+this.registers.read(n.nibbles[2]);this.registers.vF=t>>8>0?1:0,this.registers.write(n.nibbles[1],t&255)},n.prototype.iSubYfromXWithBorrow=function(n){var t=this.registers.read(n.nibbles[1])-this.registers.read(n.nibbles[2]);this.registers.vF=t<0?0:1,this.registers.write(n.nibbles[1],t&255)},n.prototype.mapInstructions=function(){this.instructions[0]=this.iRet,this.instructions[1]=this.iJmp,this.instructions[2]=this.iCall,this.instructions[3]=this.iSkipEqual,this.instructions[4]=this.iSkipNotEqual,this.instructions[5]=this.iSkipXequalY,this.instructions[6]=this.iSetX,this.instructions[7]=this.iAddNtoX,this.instructions[8]=this.branch8,this.instructions8[0]=this.iSetXtoY,this.instructions8[1]=this.iOrXwithY,this.instructions8[2]=this.iAndXwithY,this.instructions8[3]=this.iXorXwithY,this.instructions8[4]=this.iAddYtoXWithCarry,this.instructions8[5]=this.iSubYfromXWithBorrow},n}();n.Core=t})(t.chip8||(t.chip8={}));var i=t.chip8})