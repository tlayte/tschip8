define(["require","exports","chip8/decoder","chip8/registers","chip8/stack","chip8/memory","chip8/timers","chip8/screen","chip8/keypad","chip8/core","chip8/assembler","lib/jquery-2.0.0"],function(n,t,i,r,u,f,e,o,s,h,c){function k(){a.reset(),a.load(512,[96,10,101,5,102,10,103,15,104,20,97,1,98,1,99,1,100,1,96,10,162,120,208,86,112,10,162,126,208,102,112,10,162,132,208,118,112,10,162,138,208,134,106,3,250,21,96,10,162,120,208,86,69,20,97,255,69,1,97,1,133,20,208,86,112,10,162,126,208,102,70,20,98,255,70,1,98,1,134,36,208,102,112,10,162,132,208,118,71,20,99,255,71,1,99,1,135,52,208,118,112,10,162,138,208,134,72,20,100,255,72,1,100,1,136,68,208,134,18,42,255,3,12,48,192,255,255,192,192,252,192,255,240,204,204,240,204,195,60,195,195,195,195,60],-1);return}var d=i,g=r,nt=u,tt=f,it=e,rt=o,ut=s,ft=h,et=c,l=new g.chip8.Registers,a=new tt.chip8.Memory,p=new d.chip8.Decoder(a,l),w=new nt.chip8.Stack,y=new it.chip8.Timers,v=new rt.chip8.Screen,ot=new ut.chip8.Keypad,b=new ft.chip8.Core(l,w,a,y,v,ot),st=new et.chip8.Disassembler;$(document).ready(function(){function u(){if(!b.halted){var n=p.getNext();b.execute(n)}}function f(){y.tick()}var i=document.createElement("audio"),t,r,e,n;i.loop=!0,i.autoplay=!1,i.preload="auto",i.src="beep.mp3",k(),l.reset(),$(".cycle").click(function(){f(),u()}),t=null,r=null,$(".start").click(function(){t==null?(t=setInterval(function(){for(var n=0;n<20;n++)u()},0),r=setInterval(function(){f()},16)):(clearInterval(t),clearInterval(r),t=null,r=null)}),$(".keypad").click(function(){$(".keypad-container").toggleClass("icon-sized"),console.dir(this)}),$(".keypad-button").click(function(n){n.stopPropagation()}),$(".keypad-button").mousedown(function(){$(this).data("isPressed",!0),console.log("Key "+parseInt($(this).data("key"),10).toString(16)+" pressed")}),$(".keypad-button").mouseup(function(){$(this).data("isPressed")&&($(this).data("isPressed",!1),console.log("Key "+parseInt($(this).data("key"),10).toString(16)+" released"))}),$(".keypad-button").mouseout(function(){$(this).data("isPressed")&&($(this).data("isPressed",!1),console.log("Key "+parseInt($(this).data("key"),10).toString(16)+" released"))}),$(".keypad-controls-grabber").click(function(){$(".keypad-controls-container").toggleClass("slide-out")}),e=$("#display")[0],n=e.getContext("2d"),v.onClear.subscribe(function(){n.fillStyle="#000000",n.fillRect(0,0,128,64)}),v.onDraw.subscribe(function(){var i,t,r,u;for(n.beginPath(),i=v.getPixels(),n.fillStyle="rgba(0,0,0,0.3)",t=0;t<i.length;t++)i[t]==0&&(r=t%64,u=t>>6,n.rect(r*2,u*2,2,2));for(n.fill(),n.beginPath(),n.fillStyle="#00FF00",t=0;t<i.length;t++)i[t]==1&&(r=t%64,u=t>>6,n.rect(r*2,u*2,2,2));n.fill()}),$(".reset").click(function(){t&&(clearInterval(t),t=null),a.reset(),k(),w.reset(),y.reset(),l.reset()})})})