define(["require","exports","chip8/screen"],function(n,t,i){var r=i,u;(function(n){(function(){function t(){for(var i=[],t,n=0;n<arguments.length-0;n++)i[n]=arguments[n+0];return t=[],i.forEach(function(n){t.push(parseInt(n,2))}),t}function n(n,t,i,r){var u=t+i*r;return n[u]}describe("A screen object",function(){it("should have a default size of 64x32",function(){var n=new r.chip8.Screen;expect(n.width).toBe(64),expect(n.height).toBe(32)}),it("should have a default size of 128x64",function(){var n=new r.chip8.Screen(128,64);expect(n.width).toBe(128),expect(n.height).toBe(64)}),describe("with a size of 10x10",function(){var i;beforeEach(function(){i=new r.chip8.Screen(10,10)}),it("should return 100 pixels",function(){var n=i.getPixels();expect(n.length).toBe(100)}),it("should initialise all pixels to 0",function(){var n=i.getPixels();expect(n.every(function(n){return n==0})).toBeTruthy()}),it("should draw a solid 8x8 block sprite at 0,0",function(){var e=t("11111111","11111111","11111111","11111111","11111111","11111111","11111111","11111111"),o=i.draw(0,0,e),f,r,u;for(expect(o).toBe(0),f=i.getPixels(),r=0;r<8;r++)for(u=0;u<8;u++)expect(n(f,r,u,10)).toBe(1)}),it("should wrap horizontally",function(){var u=t("10011001","11111111"),r;i.draw(6,0,u),r=i.getPixels(),expect(n(r,3,0,10)).toBe(1),expect(n(r,2,0,10)).toBe(0),expect(n(r,1,0,10)).toBe(0),expect(n(r,0,0,10)).toBe(1)}),it("should wrap vertically",function(){var u=t("10000000","00000000","00000000","10000000","10000000","00000000","00000000","10000000"),r;i.draw(0,6,u),r=i.getPixels(),expect(n(r,0,3,10)).toBe(1),expect(n(r,0,2,10)).toBe(0),expect(n(r,0,1,10)).toBe(0),expect(n(r,0,0,10)).toBe(1)}),it("should XOR the pixels of a sprite",function(){var u=t("11110000","11110000","11110000","00000000","00000000","00000000","00000000","00000000"),f=t("00000000","01100000","00000000","00000000","00000000","00000000","00000000","00000000"),e=i.draw(0,0,u),o=i.draw(0,0,f),r;expect(e).toBe(0),expect(o).toBe(1),r=i.getPixels(),expect(n(r,0,0,10)).toBe(1),expect(n(r,1,1,10)).toBe(0)}),it("should raise an event when drawing",function(){var n=jasmine.createSpy("callback");i.onDraw.subscribe(n),i.draw(0,2,[255,255]),expect(n).toHaveBeenCalled()}),it("should raise an event when clearing",function(){var n=jasmine.createSpy("callback");i.onClear.subscribe(n),i.clear(),expect(n).toHaveBeenCalled()})})})})(n.spec||(n.spec={}));var t=n.spec})(t.chip8||(t.chip8={})),u=t.chip8})